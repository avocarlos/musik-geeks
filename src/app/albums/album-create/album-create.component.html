<app-list-header [title]="title"></app-list-header>
<div class="container mt-5 mb-5">
  <div class="row">
    <div class="col-12 col-md-6">
      <form
        [formGroup]="albumForm"
        (ngSubmit)="!albumForm.invalid && createNewAlbum(albumForm.value)"
      >
        <div class="mb-4" [formGroup]="albumForm">
          <label for="name" class="form-label" i18n> Título </label>
          <input
            novalidate
            id="name"
            name="name"
            class="form-control"
            formControlName="name"
            i18n-placeholder
            placeholder="Título del album"
            required
          />
          <div
            class="alert alert-danger alert-dismissible fade show"
            *ngIf="
              albumForm.get('name').hasError('required') &&
              albumForm.get('name').touched
            "
            i18n
          >
            Título es requerido
          </div>
        </div>
        <div class="mb-4" [formGroup]="albumForm">
          <label for="cover" class="form-label" i18n> Portada </label>
          <input
            type="url"
            novalidate
            id="cover"
            name="cover"
            class="form-control"
            formControlName="cover"
            i18n-placeholder
            placeholder="URL de la portada del album"
            required
          />
          <div
            class="alert alert-danger alert-dismissible fade show"
            *ngIf="
              albumForm.get('cover').hasError('required') &&
              albumForm.get('name').touched
            "
            i18n
          >
            URL del cover es requerido
          </div>
          <div
            class="alert alert-danger alert-dismissible fade show"
            *ngIf="
              albumForm.get('cover').hasError('pattern') &&
              albumForm.get('name').touched
            "
            i18n
          >
            Texto ingresado no tiene formato de URL
          </div>
        </div>
        <div class="mb-4" [formGroup]="albumForm">
          <label for="releaseDate" class="form-label" i18n> Lanzamiento </label>
          <input
            type="date"
            novalidate
            id="releaseDate"
            name="releaseDate"
            class="form-control"
            formControlName="releaseDate"
            i18n-placeholder
            placeholder="dd/mm/yyyy"
            required
          />
          <div
            class="alert alert-danger alert-dismissible fade show"
            *ngIf="
              albumForm.get('releaseDate').hasError('required') &&
              albumForm.get('releaseDate').touched
            "
            i18n
          >
            Fecha de lanzamiento es requerida
          </div>
        </div>
        <div class="mb-4" [formGroup]="albumForm">
          <label for="genre" class="form-label" i18n> Género </label>
          <select novalidate
          id="genre"
          name="genre"
          class="form-control"
          formControlName="genre"
          i18n-placeholder
          placeholder="Género del album"
          required
          (change)="changeGenre($event)">
            <option value="" disabled>Seleccione el género</option>
            <option *ngFor="let genre of genreList" id="genre{{genre}}" [ngValue]="genre">{{genre}}</option>
         </select>
          <div
            class="alert alert-danger alert-dismissible fade show"
            *ngIf="
              albumForm.get('genre').hasError('required') &&
              albumForm.get('genre').touched
            "
            i18n
          >
            Género es requerido
          </div>
        </div>
        <div class="mb-4" [formGroup]="albumForm">
          <label for="recordLabel" class="form-label" i18n> Firma Discográfica </label>
          <select novalidate
          id="recordLabel"
          name="recordLabel"
          class="form-control"
          formControlName="recordLabel"
          i18n-placeholder
          placeholder="Firma discográfica de lanzamiento"
          required
          (change)="changeRecordLabel($event)">
            <option value="" disabled>Seleccione la firma</option>
            <option *ngFor="let recordLabel of recordingLabelList" [ngValue]="recordLabel">{{recordLabel}}</option>
         </select>
          <div
            class="alert alert-danger alert-dismissible fade show"
            *ngIf="
              albumForm.get('recordLabel').hasError('required') &&
              albumForm.get('recordLabel').touched
            "
            i18n
          >
            Firma es requerida
          </div>
          <div
            class="alert alert-danger alert-dismissible fade show"
            *ngIf="
              albumForm.get('recordLabel').hasError('maxlength') &&
              albumForm.get('recordLabel').touched
            "

          >
            Firma no debe tener más de 100 caracteres
          </div>
        </div>
        <div class="mb-4" [formGroup]="albumForm">
          <label for="description" class="form-label" i18n> Descripción </label>
          <textarea
            novalidate
            id="description"
            name="description"
            class="form-control"
            formControlName="description"
            i18n-placeholder
            placeholder="Descripción del album"
            required
          ></textarea>
          <div
            class="alert alert-danger alert-dismissible fade show"
            *ngIf="
              albumForm.get('description').hasError('required') &&
              albumForm.get('description').touched
            "
            i18n
          >
            Descripción es requerida
          </div>
          <div
            class="alert alert-danger alert-dismissible fade show"
            *ngIf="
              albumForm.get('description').hasError('maxlength') &&
              albumForm.get('description').touched
            "
            i18n
          >
            Tamaño máximo de la descripción son 500 caracterés
          </div>
          <div
            class="alert alert-danger alert-dismissible fade show"
            *ngIf="
              albumForm.get('description').hasError('minlength') &&
              albumForm.get('description').touched
            "

          >
            Tamaño mínimo de la descripción son 10 caracterés
          </div>
        </div>
        <button id="createButton"
          type="submit"
          class="btn btn-primary"
          [disabled]="!albumForm.valid"
          i18n
        >Crear</button>
        <button id="cancelButton"
          type="button"
          class="btn btn-danger ml-3"
          (click)="cancelCreation()"
          i18n
        >Cancelar</button>
      </form>
    </div>
  </div>
</div>
